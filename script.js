// --- i18n Content ---
const i18nStrings = {
    pageTitle: { en: "elev8digital - We Elevate Your Business", de: "elev8digital - We Elevate Your Business" },
   navHome: { en: "Home", de: "Home" },
   navAbout: { en: "About", de: "About" },
   navServices: { en: "Services", de: "Services" },
   navExperience: { en: "Experience", de: "Experience" },
   navWhyUs: { en: "Why Us", de: "Why Us" },
   navContact: { en: "Contact", de: "Kontakt" },
   heroHeadline: { en: "We Elevate Your<br>Business", de: "We Elevate Your<br>Business" },
   heroSubheadline: { en: "Performance marketing & e-commerce expertise focused on driving measurable growth for ambitious brands.", de: "Performance Marketing und E-Commerce-Kompetenz für nachhaltiges, messbares Wachstum starker Marken." },
   heroButton: { en: "Start Scaling", de: "Jetzt Skalieren" },
   // --- Adjusted German Hyphenation using &shy; ---
   aboutTitle: { en: "Your<br>Growth Partners", de: "Ihre<br>Wachstumspartner" },
   aboutText1: { en: "elev8digital isn't just another agency. We are a dedicated duo, deeply invested in the success of our clients. We blend strategic performance marketing with meticulous e-commerce optimization.", de: "Als engagiertes Zweierteam setzen wir alles daran, unsere Kunden erfolgreich zu machen. Wir verbinden strategisches Performance Marketing mit sorgfältiger E-Commerce-Optimierung." },
   aboutText2: { en: "We focus on what matters: data-driven strategies that deliver tangible ROI. Think of us as an extension of your team – dedicated, transparent, and focused on your goals.", de: "Wir konzentrieren uns auf das Wesentliche: Datengestützte Strategien, die greifbaren ROI liefern. Betrachten Sie uns als Erweiterung Ihres Teams – engagiert, transparent und auf Ihre Ziele fokussiert." },
   aboutButton: { en: "Explore Services", de: "Leistungen Entdecken" },
   servicesTitle: { en: "Core Capabilities", de: "Kernkompetenzen" },
   servicesSubtitle: { en: "Tailored solutions designed to maximize your digital footprint and revenue.", de: "Maßgeschneiderte Lösungen zur Maximierung Ihrer digitalen Präsenz und Ihres Umsatzes." },
   service1Title: { en: "Performance<br>Marketing", de: "Performance<br>Marketing" },
   service1Text: { en: "Data-backed campaigns on Google, Meta, TikTok & more. With a clear focus on conversions, ROAS, and Customer Acquisition Cost (CAC).", de: "Datengestützte Kampagnen auf Google, Meta, TikTok & Co. Mit klarem Fokus auf Conversions, ROAS und Kundengewinnungskosten (CAC)." },
   service2Title: { en: "E-Commerce<br>Optimization", de: "E-Commerce<br>Optimierung" },
   service2Text: { en: "Enhancing user experience, conversion rates (CRO), average order value (AOV), and customer lifetime value (CLTV) for platforms like Shopify.", de: "Verbesserung der User Experience, Conversion Rates (CRO), des durchschnittlichen Bestellwerts (AOV) und des Customer Lifetime Value (CLTV) für Plattformen wie Shopify." },
   service3Title: { en: "Strategy & Analytics", de: "Strategie & Analytics" },
   service3Text: { en: "Holistic growth strategies built for scale. From channel mix to conversion funnels — we bridge marketing and tech to unlock your brand’s full potential.", de: "Ganzheitliche Wachstumsstrategien für Skalierbarkeit. Vom Channel-Mix bis zu Conversion Funnels – wir verbinden Marketing und Technologie, um das volle Potenzial Ihrer Marke zu erschließen." },
   experienceTitle: { en: "Proven Expertise", de: "Nachgewiesene Expertise" },
   experienceCounter1Label: { en: "Years Combined Experience", de: "Jahre kombinierte Erfahrung" },
   experienceCounter2Value: { en: "8-Figure", de: "8-stellig" },
   experienceCounter2Label: { en: "Budgets Managed Annually", de: "Verwaltete Jahresbudgets" },
   whyUsTitle: { en: "The Elev8 <span class='br-mobile'></span>Advantage", de: "The Elev8 <span class='br-mobile'></span>Advantage" },
   whyUsSubtitle: { en: "We combine agency-level expertise with the focus and dedication of in-house specialists.", de: "Wir kombinieren Expertise auf Agentur-Niveau mit dem Fokus und Engagement von Inhouse-Spezialisten." },
   advantage1Title: { en: "Direct Founder Involvement", de: "Direkte Betreuung durch Gründer" },
   advantage1Text: { en: "Work directly with us – no junior account managers, ensuring deep understanding.", de: "Bei uns arbeiten Sie direkt mit erfahrenen Profis – kein Weiterreichen an Junioren, dafür echtes Verständnis und schnelle Ergebnisse." },
   advantage2Title: { en: "Uncompromisingly Data-Driven", de: "Kompromisslos datengesteuert" },
   advantage2Text: { en: "Every decision and strategy is rooted in analytics, not guesswork.", de: "Jede Entscheidung und Strategie basiert auf Analysen, nicht auf Vermutungen." },
   advantage3Title: { en: "Bespoke Strategies", de: "Maßgeschneiderte Strategien" },
   advantage3Text: { en: "Solutions meticulously crafted for your unique brand, market, and goals.", de: "Sorgfältig entwickelte Lösungen für Ihre einzigartige Marke, Ihren Markt und Ihre Ziele." },
   advantage4Title: { en: "Obsessed with Results", de: "Ergebnisfokussiert" },
   advantage4Text: { en: "We measure our success directly by the tangible growth of your bottom line.", de: "Wir messen unseren Erfolg direkt am greifbaren Wachstum Ihres Geschäftsergebnisses." },
   advantage5Title: { en: "Radical Transparency", de: "Absolute Transparenz" },
   advantage5Text: { en: "Clear, consistent communication and reporting are fundamental to our partnership.", de: "Klare, konsistente Kommunikation und Berichterstattung sind grundlegend für unsere Partnerschaft." },
   whyUsButton: { en: "Let's Collaborate", de: "Projekt besprechen" },
   contactTitle: { en: "Start Your <span class='br-mobile'></span>Elevation", de: "Start Your <span class='br-mobile'></span>Elevation" },
   contactSubtitle: { en: "Ready to discuss how elev8digital can accelerate your growth? Fill out the form below or email us directly. We're excited to hear from you.", de: "Lassen Sie uns gemeinsam besprechen, wie elev8digital Ihr Wachstum voranbringen kann. Schreiben Sie uns direkt oder füllen Sie das Kontaktformular aus – wir freuen uns auf Ihre Nachricht!" },
   formLabelName: { en: "Name", de: "Name" },
   formLabelEmail: { en: "Email", de: "E-Mail" },
   formLabelSubject: { en: "Subject", de: "Betreff" },
   formLabelMessage: { en: "Your Message", de: "Ihre Nachricht" },
   formButtonSubmit: { en: "Send Message", de: "Nachricht Senden" },
   formButtonSending: { en: "Sending...", de: "Sende..." },
   contactEmailPrefix: { en: "Email:", de: "E-Mail:" },
   footerRights: { en: "All Rights Reserved.", de: "Alle Rechte vorbehalten." },
   footerImprint: { en: "Imprint", de: "Impressum" },
   footerPrivacy: { en: "Privacy Policy", de: "Datenschutz" },
   imprintTitle: { en: "Imprint", de: "Impressum" },
   imprintDSGVO: { en: "Information according to § 5 TMG", de: "Angaben gemäß § 5 TMG" },
   imprintPartners: { en: "Represented by the partners:", de: "Vertreten durch die Gesellschafter:" },
   imprintContact: { en: "Contact:", de: "Kontakt:" },
   imprintPhone: { en: "Phone:", de: "Telefon:" },
   imprintPhoneOptional: { en: "(Optional, please enter)", de: "(Optional, bitte eintragen)" },
   imprintEmail: { en: "Email:", de: "E-Mail:" },
   imprintVatId: { en: "VAT ID:", de: "Umsatzsteuer-ID:" },
   imprintVatIdText: { en: "VAT identification number according to §27a VAT Act:", de: "Umsatzsteuer-Identifikationsnummer gemäß §27a Umsatzsteuergesetz:" },
   imprintDisputeTitle: { en: "EU Dispute Resolution", de: "EU-Streitschlichtung" },
   imprintDisputeText1: { en: "The European Commission provides a platform for online dispute resolution (ODR):", de: "Die Europäische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit:" },
   imprintDisputeText2: { en: "Our e-mail address can be found above in the imprint.", de: "Unsere E-Mail-Adresse finden Sie oben im Impressum." },
   imprintDisputeConsumerText1: { en: "We are not willing or obliged to participate in dispute resolution proceedings before a consumer arbitration board.", de: "Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen." },
   imprintLiabilityContentTitle: { en: "Liability for Contents", de: "Haftung für Inhalte" },
   imprintLiabilityContentText: { en: "As service providers, we are liable for own contents of these websites according to Sec. 7, paragraph 1 TMG (German Telemedia Act). However, according to Sec. 8 to 10 TMG, service providers are not obligated to permanently monitor submitted or stored information or to search for evidences that indicate illegal activities. Legal obligations to removing information or to blocking the use of information remain unchallenged. In this case, liability is only possible at the time of knowledge about a specific violation of law. Illegal contents will be removed immediately at the time we get knowledge of them.", de: "Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen." },
   imprintLiabilityLinksTitle: { en: "Liability for Links", de: "Haftung für Links" },
   imprintLiabilityLinksText: { en: "Our offer includes links to external third party websites. We have no influence on the contents of those websites, therefore we cannot guarantee for those contents. Providers or administrators of linked websites are always responsible for their own contents. The linked websites had been checked for possible violations of law at the time of the establishment of the link. Illegal contents were not detected at the time of the linking. A permanent monitoring of the contents of linked websites cannot be imposed without reasonable indications that there has been a violation of law. Illegal links will be removed immediately at the time we get knowledge of them.", de: "Unser Angebot enthält Links zu externen Websites Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden Inhalte auch keine Gewähr übernehmen. Für die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar. Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen." },
   imprintCopyrightTitle: { en: "Copyright", de: "Urheberrecht" },
   imprintCopyrightText: { en: "Contents and compilations published on these websites by the providers are subject to German copyright laws. Reproduction, editing, distribution as well as the use of any kind outside the scope of the copyright law require a written permission of the author or originator. Downloads and copies of these websites are permitted for private use only. The commercial use of our contents without permission of the originator is prohibited. Copyright laws of third parties are respected as long as the contents on these websites do not originate from the provider. Contributions of third parties on this site are indicated as such. However, if you notice any violations of copyright law, please inform us. Such contents will be removed immediately.", de: "Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielfältigung, Bearbeitung, Verbreitung und jede Art der Verwertung außerhalb der Grenzen des Urheberrechtes bedürfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur für den privaten, nicht kommerziellen Gebrauch gestattet. Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen." },
   // --- Adjusted German Hyphenation using &shy; ---
   privacyTitle: { en: "Privacy Policy", de: "Datenschutz&shy;erklärung" },
   privacyGeneralTitle: { en: "1. Privacy at a Glance", de: "1. Datenschutz auf einen Blick" },
   privacyGeneralHintTitle: { en: "General Information", de: "Allgemeine Hinweise" },
   privacyGeneralHintText: { en: "The following notes provide a simple overview of what happens to your personal data when you visit this website. Personal data is any data with which you can be personally identified. Detailed information on the subject of data protection can be found in our privacy policy listed below this text.", de: "Die folgenden Hinweise geben einen einfachen Überblick darüber, was mit Ihren personenbezogenen Daten passiert, wenn Sie diese Website besuchen. Personenbezogene Daten sind alle Daten, mit denen Sie persönlich identifiziert werden können. Ausführliche Informationen zum Thema Datenschutz entnehmen Sie unserer unter diesem Text aufgeführten Datenschutzerklärung." },
   privacyDataCollectionTitle: { en: "Data Collection on this Website", de: "Datenerfassung auf dieser Website" },
   privacyResponsiblePartyTitle: { en: "Who is responsible for data collection on this website?", de: "Wer ist verantwortlich für die Datenerfassung auf dieser Website?" },
   privacyResponsiblePartyText: { en: "Data processing on this website is carried out by the website operator. Their contact details can be found in the section 'Note on the responsible body' in this privacy policy.", de: "Die Datenverarbeitung auf dieser Website erfolgt durch den Websitebetreiber. Dessen Kontaktdaten können Sie dem Abschnitt „Hinweis zur Verantwortlichen Stelle“ in dieser Datenschutzerklärung entnehmen." },
   privacyHowDataCollectedTitle: { en: "How do we collect your data?", de: "Wie erfassen wir Ihre Daten?" },
   privacyHowDataCollectedText1: { en: "On the one hand, your data is collected when you provide it to us. This can be, for example, data that you enter in a contact form.", de: "Ihre Daten werden zum einen dadurch erhoben, dass Sie uns diese mitteilen. Hierbei kann es sich z. B. um Daten handeln, die Sie in ein Kontaktformular eingeben." },
   privacyHowDataCollectedText2: { en: "Other data is collected automatically or after your consent when you visit the website through our IT systems. This is primarily technical data (e.g., internet browser, operating system, or time of page access). This data is collected automatically as soon as you enter this website.", de: "Andere Daten werden automatisch oder nach Ihrer Einwilligung beim Besuch der Website durch unsere IT-Systeme erfasst. Das sind vor allem technische Daten (z. B. Internetbrowser, Betriebssystem oder Uhrzeit des Seitenaufrufs). Die Erfassung dieser Daten erfolgt automatisch, sobald Sie diese Website betreten." },
   privacyDataUsageTitle: { en: "What do we use your data for?", de: "Wofür nutzen wir Ihre Daten?" },
   privacyDataUsageText1: { en: "Part of the data is collected to ensure the error-free provision of the website. Other data can be used to analyze your user behavior (if analysis tools are used, which is currently not the case here).", de: "Ein Teil der Daten wird erhoben, um eine fehlerfreie Bereitstellung der Website zu gewährleisten. Andere Daten können zur Analyse Ihres Nutzerverhaltens verwendet werden (sofern Analyse-Tools eingesetzt werden, was hier aktuell nicht der Fall ist)." },
   privacyDataRightsTitle: { en: "What rights do you have regarding your data?", de: "Welche Rechte haben Sie bezüglich Ihrer Daten?" },
   privacyDataRightsText: { en: "You have the right at any time to receive information free of charge about the origin, recipient, and purpose of your stored personal data. You also have a right to request the correction or deletion of this data. If you have given your consent to data processing, you can revoke this consent at any time for the future. You also have the right, under certain circumstances, to request the restriction of the processing of your personal data. Furthermore, you have the right to lodge a complaint with the competent supervisory authority. You can contact us at any time regarding this and other questions on the subject of data protection.", de: "Sie haben jederzeit das Recht, unentgeltlich Auskunft über Herkunft, Empfänger und Zweck Ihrer gespeicherten personenbezogenen Daten zu erhalten. Sie haben außerdem ein Recht, die Berichtigung oder Löschung dieser Daten zu verlangen. Wenn Sie eine Einwilligung zur Datenverarbeitung erteilt haben, können Sie diese Einwilligung jederzeit für die Zukunft widerrufen. Außerdem haben Sie das Recht, unter bestimmten Umständen die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Des Weiteren steht Ihnen ein Beschwerderecht bei der zuständigen Aufsichtsbehörde zu. Hierzu sowie zu weiteren Fragen zum Thema Datenschutz können Sie sich jederzeit an uns wenden." },
   privacyHostingTitle: { en: "2. Hosting", de: "2. Hosting" },
   privacyHostingText1: { en: "We host our website with GitHub Pages. The provider is GitHub Inc., 88 Colin P Kelly Jr St, San Francisco, CA 94107, USA (hereinafter: GitHub). When you visit our website, GitHub collects various log files including your IP addresses.", de: "Wir hosten unsere Website bei GitHub Pages. Anbieter ist die GitHub Inc., 88 Colin P Kelly Jr St, San Francisco, CA 94107, USA (nachfolgend: GitHub). Wenn Sie unsere Website besuchen, erfasst GitHub verschiedene Logfiles einschließlich Ihrer IP-Adressen." },
   privacyHostingText2: { en: "The use of GitHub Pages is in the interest of a secure, fast, and efficient provision of our online offer by a professional provider (Art. 6 Para. 1 lit. f GDPR). GitHub will only process your data to the extent necessary to fulfill its service obligations and will follow our instructions regarding this data.", de: "Die Verwendung von GitHub Pages erfolgt im Interesse einer sicheren, schnellen und effizienten Bereitstellung unseres Online-Angebots durch einen professionellen Anbieter (Art. 6 Abs. 1 lit. f DSGVO). GitHub wird Ihre Daten nur insoweit verarbeiten, wie dies zur Erfüllung seiner Leistungspflichten erforderlich ist und unsere Weisungen in Bezug auf diese Daten befolgen." },
   privacyHostingText3: { en: "Further information can be found in GitHub's privacy policy:", de: "Weitere Informationen finden Sie in der Datenschutzerklärung von GitHub:" },
   privacyHostingContractText: { en: "We have concluded a data processing agreement (DPA) for the use of the aforementioned service. This is a contract required by data protection law, which ensures that it processes the personal data of our website visitors only according to our instructions and in compliance with the GDPR.", de: "Wir haben einen Vertrag über Auftragsverarbeitung (AVV) zur Nutzung des oben genannten Dienstes geschlossen. Hierbei handelt es sich um einen datenschutzrechtlich vorgeschriebenen Vertrag, der gewährleistet, dass dieser die personenbezogenen Daten unserer Websitebesucher nur nach unseren Weisungen und unter Einhaltung der DSGVO verarbeitet." },
   privacyMandatoryInfoTitle: { en: "3. General Notes and Mandatory Information", de: "3. Allgemeine Hinweise und Pflicht­informationen" },
   privacyProtectionTitle: { en: "Data Protection", de: "Datenschutz" },
   privacyProtectionText1: { en: "The operators of these pages take the protection of your personal data very seriously. We treat your personal data confidentially and in accordance with the statutory data protection regulations and this privacy policy.", de: "Die Betreiber dieser Seiten nehmen den Schutz Ihrer persönlichen Daten sehr ernst. Wir behandeln Ihre personenbezogenen Daten vertraulich und entsprechend der gesetzlichen Datenschutzvorschriften sowie dieser Datenschutzerklärung." },
   privacyProtectionText2: { en: "When you use this website, various personal data are collected. Personal data is data with which you can be personally identified. This privacy policy explains what data we collect and what we use it for. It also explains how and for what purpose this happens.", de: "Wenn Sie diese Website benutzen, werden verschiedene personenbezogene Daten erhoben. Personenbezogene Daten sind Daten, mit denen Sie persönlich identifiziert werden können. Die vorliegende Datenschutzerklärung erläutert, welche Daten wir erheben und wofür wir sie nutzen. Sie erläutert auch, wie und zu welchem Zweck das geschieht." },
   privacyProtectionText3: { en: "We would like to point out that data transmission over the Internet (e.g., when communicating by e-mail) can have security gaps. Complete protection of data against access by third parties is not possible.", de: "Wir weisen darauf hin, dass die Datenübertragung im Internet (z. B. bei der Kommunikation per E-Mail) Sicherheitslücken aufweisen kann. Ein lückenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht möglich." },
   privacyControllerTitle: { en: "Note on the responsible body", de: "Hinweis zur verantwortlichen Stelle" },
   privacyControllerText1: { en: "The responsible body for data processing on this website is:", de: "Die verantwortliche Stelle für die Datenverarbeitung auf dieser Website ist:" },
   privacyControllerText2: { en: "The responsible body is the natural or legal person who alone or jointly with others decides on the purposes and means of processing personal data (e.g., names, e-mail addresses, etc.).", de: "Verantwortliche Stelle ist die natürliche oder juristische Person, die allein oder gemeinsam mit anderen über die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten (z. B. Namen, E-Mail-Adressen o. Ä.) entscheidet." },
   privacyStorageDurationTitle: { en: "Storage Duration", de: "Speicherdauer" },
   privacyStorageDurationText: { en: "Unless a more specific storage period has been specified within this privacy policy, your personal data will remain with us until the purpose for data processing ceases to apply. If you assert a legitimate request for deletion or revoke your consent to data processing, your data will be deleted unless we have other legally permissible reasons for storing your personal data (e.g., tax or commercial law retention periods); in the latter case, deletion will take place after these reasons cease to apply.", de: "Soweit innerhalb dieser Datenschutzerklärung keine speziellere Speicherdauer genannt wurde, verbleiben Ihre personenbezogenen Daten bei uns, bis der Zweck für die Datenverarbeitung entfällt. Wenn Sie ein berechtigtes Löschersuchen geltend machen oder eine Einwilligung zur Datenverarbeitung widerrufen, werden Ihre Daten gelöscht, sofern wir keine anderen rechtlich zulässigen Gründe für die Speicherung Ihrer personenbezogenen Daten haben (z. B. steuer- oder handelsrechtliche Aufbewahrungsfristen); im letztgenannten Fall erfolgt die Löschung nach Fortfall dieser Gründe." },
   privacyLegalBasisTitle: { en: "Note on the legal basis for data processing on this website", de: "Hinweis zur Rechtsgrundlage der Datenverarbeitung auf dieser Website" },
   privacyLegalBasisText: { en: "If you have consented to data processing, we process your personal data on the basis of Art. 6 Para. 1 lit. a GDPR or Art. 9 Para. 2 lit. a GDPR, if special categories of data according to Art. 9 Para. 1 GDPR are processed. In the case of explicit consent to the transfer of personal data to third countries, data processing is also based on Art. 49 Para. 1 lit. a GDPR. If you have consented to the storage of cookies or access to information on your end device (e.g., via device fingerprinting), data processing is additionally based on § 25 Para. 1 TTDSG. Consent can be revoked at any time. If your data is required for contract fulfillment or for carrying out pre-contractual measures, we process your data on the basis of Art. 6 Para. 1 lit. b GDPR. Furthermore, we process your data if it is required to fulfill a legal obligation on the basis of Art. 6 Para. 1 lit. c GDPR. Data processing may also be based on our legitimate interest according to Art. 6 Para. 1 lit. f GDPR. Information about the relevant legal basis in each individual case is provided in the following paragraphs of this privacy policy.", de: "Sofern Sie in die Datenverarbeitung eingewilligt haben, verarbeiten wir Ihre personenbezogenen Daten auf Grundlage von Art. 6 Abs. 1 lit. a DSGVO bzw. Art. 9 Abs. 2 lit. a DSGVO, sofern besondere Datenkategorien nach Art. 9 Abs. 1 DSGVO verarbeitet werden. Im Falle einer ausdrücklichen Einwilligung in die Übertragung personenbezogener Daten in Drittstaaten erfolgt die Datenverarbeitung außerdem auf Grundlage von Art. 49 Abs. 1 lit. a DSGVO. Sofern Sie in die Speicherung von Cookies oder in den Zugriff auf Informationen in Ihr Endgerät (z. B. via Device-Fingerprinting) eingewilligt haben, erfolgt die Datenverarbeitung zusätzlich auf Grundlage von § 25 Abs. 1 TTDSG. Die Einwilligung ist jederzeit widerrufbar. Sind Ihre Daten zur Vertragserfüllung oder zur Durchführung vorvertraglicher Maßnahmen erforderlich, verarbeiten wir Ihre Daten auf Grundlage des Art. 6 Abs. 1 lit. b DSGVO. Des Weiteren verarbeiten wir Ihre Daten, sofern diese zur Erfüllung einer rechtlichen Verpflichtung erforderlich sind auf Grundlage von Art. 6 Abs. 1 lit. c DSGVO. Die Datenverarbeitung kann ferner auf Grundlage unseres berechtigten Interesses nach Art. 6 Abs. 1 lit. f DSGVO erfolgen. Über die jeweils im Einzelfall einschlägigen Rechtsgrundlagen wird in den folgenden Absätzen dieser Datenschutzerklärung informiert." },
   privacyRevocationTitle: { en: "Revocation of your consent to data processing", de: "Widerruf Ihrer Einwilligung zur Datenverarbeitung" },
   privacyRevocationText: { en: "Many data processing operations are only possible with your express consent. You can revoke consent you have already given at any time. The legality of the data processing carried out until the revocation remains unaffected by the revocation.", de: "Viele Datenverarbeitungsvorgänge sind nur mit Ihrer ausdrücklichen Einwilligung möglich. Sie können eine bereits erteilte Einwilligung jederzeit widerrufen. Die Rechtmäßigkeit der bis zum Widerruf erfolgten Datenverarbeitung bleibt vom Widerruf unberührt." },
   privacyComplaintRightTitle: { en: "Right to lodge a complaint with the competent supervisory authority", de: "Beschwerde­recht bei der zuständigen Aufsichts­behörde" },
   privacyComplaintRightText: { en: "In the event of violations of the GDPR, data subjects have the right to lodge a complaint with a supervisory authority, in particular in the Member State of their habitual residence, their place of work or the place of the alleged violation. The right to lodge a complaint exists without prejudice to other administrative or judicial remedies.", de: "Im Falle von Verstößen gegen die DSGVO steht den Betroffenen ein Beschwerderecht bei einer Aufsichtsbehörde, insbesondere in dem Mitgliedstaat ihres gewöhnlichen Aufenthalts, ihres Arbeitsplatzes oder des Orts des mutmaßlichen Verstoßes zu. Das Beschwerderecht besteht unbeschadet anderweitiger verwaltungsrechtlicher oder gerichtlicher Rechtsbehelfe." },
   privacyPortabilityTitle: { en: "Right to data portability", de: "Recht auf Daten­übertrag­barkeit" },
   privacyPortabilityText: { en: "You have the right to have data that we process automatically on the basis of your consent or in fulfillment of a contract handed over to you or to a third party in a common, machine-readable format. If you request the direct transfer of the data to another controller, this will only be done to the extent technically feasible.", de: "Sie haben das Recht, Daten, die wir auf Grundlage Ihrer Einwilligung oder in Erfüllung eines Vertrags automatisiert verarbeiten, an sich oder an einen Dritten in einem gängigen, maschinenlesbaren Format aushändigen zu lassen. Sofern Sie die direkte Übertragung der Daten an einen anderen Verantwortlichen verlangen, erfolgt dies nur, soweit es technisch machbar ist." },
   privacyInfoDeletionTitle: { en: "Information, Correction and Deletion", de: "Auskunft, Berichtigung und Löschung" },
   privacyInfoDeletionText: { en: "Within the framework of the applicable legal provisions, you have the right at any time to free information about your stored personal data, its origin and recipient and the purpose of the data processing and, if applicable, a right to correction or deletion of this data. For this purpose, as well as for further questions on the subject of personal data, you can contact us at any time.", de: "Sie haben im Rahmen der geltenden gesetzlichen Bestimmungen jederzeit das Recht auf unentgeltliche Auskunft über Ihre gespeicherten personenbezogenen Daten, deren Herkunft und Empfänger und den Zweck der Datenverarbeitung und ggf. ein Recht auf Berichtigung oder Löschung dieser Daten. Hierzu sowie zu weiteren Fragen zum Thema personenbezogene Daten können Sie sich jederzeit an uns wenden." },
   privacyRestrictionTitle: { en: "Right to restriction of processing", de: "Recht auf Einschränkung der Verarbeitung" },
   privacyRestrictionText: { en: "You have the right to request the restriction of the processing of your personal data. You can contact us at any time for this purpose. The right to restriction of processing exists in the following cases:", de: "Sie haben das Recht, die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Hierzu können Sie sich jederzeit an uns wenden. Das Recht auf Einschränkung der Verarbeitung besteht in folgenden Fällen:" },
   privacyRestrictionCase1: { en: "If you dispute the accuracy of your personal data stored by us, we usually need time to verify this. For the duration of the check, you have the right to request the restriction of the processing of your personal data.", de: "Wenn Sie die Richtigkeit Ihrer bei uns gespeicherten personenbezogenen Daten bestreiten, benötigen wir in der Regel Zeit, um dies zu überprüfen. Für die Dauer der Prüfung haben Sie das Recht, die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen." },
   privacyRestrictionCase2: { en: "If the processing of your personal data happened / happens unlawfully, you can request the restriction of data processing instead of deletion.", de: "Wenn die Verarbeitung Ihrer personenbezogenen Daten unrechtmäßig geschah/geschieht, können Sie statt der Löschung die Einschränkung der Datenverarbeitung verlangen." },
   privacyRestrictionCase3: { en: "If we no longer need your personal data, but you need it to exercise, defend or assert legal claims, you have the right to request the restriction of the processing of your personal data instead of deletion.", de: "Wenn wir Ihre personenbezogenen Daten nicht mehr benötigen, Sie sie jedoch zur Ausübung, Verteidigung oder Geltendmachung von Rechtsansprüchen benötigen, haben Sie das Recht, statt der Löschung die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen." },
   privacyRestrictionCase4: { en: "If you have lodged an objection pursuant to Art. 21 Para. 1 GDPR, a balance must be struck between your interests and ours. As long as it has not yet been determined whose interests prevail, you have the right to request the restriction of the processing of your personal data.", de: "Wenn Sie einen Widerspruch nach Art. 21 Abs. 1 DSGVO eingelegt haben, muss eine Abwägung zwischen Ihren und unseren Interessen vorgenommen werden. Solange noch nicht feststeht, wessen Interessen überwiegen, haben Sie das Recht, die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen." },
   privacyRestrictionEffect: { en: "If you have restricted the processing of your personal data, this data – apart from its storage – may only be processed with your consent or for the assertion, exercise or defense of legal claims or for the protection of the rights of another natural or legal person or for reasons of important public interest of the European Union or a Member State.", de: "Wenn Sie die Verarbeitung Ihrer personenbezogenen Daten eingeschränkt haben, dürfen diese Daten – von ihrer Speicherung abgesehen – nur mit Ihrer Einwilligung oder zur Geltendmachung, Ausübung oder Verteidigung von Rechtsansprüchen oder zum Schutz der Rechte einer anderen natürlichen oder juristischen Person oder aus Gründen eines wichtigen öffentlichen Interesses der Europäischen Union oder eines Mitgliedstaats verarbeitet werden." },
   privacyObjectionTitle: { en: "Objection to advertising e-mails", de: "Widerspruch gegen Werbe-E-Mails" },
   privacyObjectionText: { en: "The use of contact data published within the scope of the imprint obligation to send advertising and information material not expressly requested is hereby prohibited. The operators of the pages expressly reserve the right to take legal action in the event of the unsolicited sending of advertising information, such as spam e-mails.", de: "Der Nutzung von im Rahmen der Impressumspflicht veröffentlichten Kontaktdaten zur Übersendung von nicht ausdrücklich angeforderter Werbung und Informationsmaterialien wird hiermit widersprochen. Die Betreiber der Seiten behalten sich ausdrücklich rechtliche Schritte im Falle der unverlangten Zusendung von Werbeinformationen, etwa durch Spam-E-Mails, vor." },
   privacyDataCollectionWebsiteTitle: { en: "4. Data Collection on this Website", de: "4. Datenerfassung auf dieser Website" },
   privacyContactFormTitle: { en: "Contact Form", de: "Kontaktformular" },
   privacyContactFormText1: { en: "If you send us inquiries via the contact form, your details from the inquiry form, including the contact details you provided there, will be stored by us for the purpose of processing the inquiry and in the event of follow-up questions.", de: "Wenn Sie uns per Kontaktformular Anfragen zukommen lassen, werden Ihre Angaben aus dem Anfrageformular inklusive der von Ihnen dort angegebenen Kontaktdaten zwecks Bearbeitung der Anfrage und für den Fall von Anschlussfragen bei uns gespeichert." },
   privacyContactFormText2: { en: "The processing of this data is based on Art. 6 Para. 1 lit. b GDPR, if your request is related to the fulfillment of a contract or is necessary for the implementation of pre-contractual measures. In all other cases, the processing is based on our legitimate interest in the effective processing of the inquiries addressed to us (Art. 6 Para. 1 lit. f GDPR) or on your consent (Art. 6 Para. 1 lit. a GDPR) if this was requested; consent can be revoked at any time.", de: "Die Verarbeitung dieser Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. b DSGVO, sofern Ihre Anfrage mit der Erfüllung eines Vertrags zusammenhängt oder zur Durchführung vorvertraglicher Maßnahmen erforderlich ist. In allen übrigen Fällen beruht die Verarbeitung auf unserem berechtigten Interesse an der effektiven Bearbeitung der an uns gerichteten Anfragen (Art. 6 Abs. 1 lit. f DSGVO) oder auf Ihrer Einwilligung (Art. 6 Abs. 1 lit. a DSGVO) sofern diese abgefragt wurde; die Einwilligung ist jederzeit widerrufbar." },
   privacyContactFormText3: { en: "The data you entered in the contact form will remain with us until you request deletion, revoke your consent to storage, or the purpose for data storage no longer applies (e.g., after your request has been processed). Mandatory statutory provisions – in particular retention periods – remain unaffected.", de: "Die von Ihnen im Kontaktformular eingegebenen Daten verbleiben bei uns, bis Sie uns zur Löschung auffordern, Ihre Einwilligung zur Speicherung widerrufen oder der Zweck für die Datenspeicherung entfällt (z. B. nach abgeschlossener Bearbeitung Ihrer Anfrage). Zwingende gesetzliche Bestimmungen – insbesondere Aufbewahrungsfristen – bleiben unberührt." },
   privacyContactFormProcessorText: { en: "We use the Formspree service (Formspree, Inc., 1201 N Orange St STE 7171, Wilmington, DE 19801, USA) to receive and manage the data sent via the contact form. Formspree acts as our data processor. The data is forwarded to our email address via Formspree's servers. We have concluded a data processing agreement with Formspree. You can find more information about data protection at Formspree here:", de: "Für den Empfang und die Verwaltung der über das Kontaktformular gesendeten Daten nutzen wir den Dienst Formspree (Formspree, Inc., 1201 N Orange St STE 7171, Wilmington, DE 19801, USA). Formspree agiert als unser Auftragsverarbeiter. Die Daten werden über die Server von Formspree an unsere E-Mail-Adresse weitergeleitet. Wir haben mit Formspree einen Vertrag zur Auftragsverarbeitung geschlossen. Weitere Informationen zum Datenschutz bei Formspree finden Sie hier:" },
   privacyServerLogsTitle: { en: "Server Log Files", de: "Server-Log-Dateien" },
   privacyServerLogsText1: { en: "The provider of the pages (GitHub Pages) automatically collects and stores information in so-called server log files, which your browser automatically transmits to us. These are:", de: "Der Provider der Seiten (GitHub Pages) erhebt und speichert automatisch Informationen in so genannten Server-Log-Dateien, die Ihr Browser automatisch an uns übermittelt. Dies sind:" },
   privacyServerLogItem1: { en: "Browser type and browser version", de: "Browsertyp und Browserversion" },
   privacyServerLogItem2: { en: "Operating system used", de: "verwendetes Betriebssystem" },
   privacyServerLogItem3: { en: "Referrer URL", de: "Referrer URL" },
   privacyServerLogItem4: { en: "Hostname of the accessing computer", de: "Hostname des zugreifenden Rechners" },
   privacyServerLogItem5: { en: "Time of the server request", de: "Uhrzeit der Serveranfrage" },
   privacyServerLogItem6: { en: "IP address (usually anonymized)", de: "IP-Adresse (in der Regel anonymisiert)" },
   privacyServerLogsText2: { en: "This data is not merged with other data sources.", de: "Eine Zusammenführung dieser Daten mit anderen Datenquellen wird nicht vorgenommen." },
   privacyServerLogsText3: { en: "This data is collected on the basis of Art. 6 Para. 1 lit. f GDPR. The website operator has a legitimate interest in the technically error-free presentation and optimization of their website – for this purpose, the server log files must be collected.", de: "Die Erfassung dieser Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. f DSGVO. Der Websitebetreiber hat ein berechtigtes Interesse an der technisch fehlerfreien Darstellung und der Optimierung seiner Website – hierzu müssen die Server-Log-Files erfasst werden." },
   privacyCookiesTitle: { en: "5. Cookies", de: "5. Cookies" },
   privacyCookiesText: { en: "Our internet pages use so-called 'cookies'. Cookies are small data packets and do not cause any damage to your end device. They are stored either temporarily for the duration of a session (session cookies) or permanently (permanent cookies) on your end device. Session cookies are automatically deleted after the end of your visit. Permanent cookies remain stored on your end device until you delete them yourself or an automatic deletion is carried out by your web browser. Cookies can originate from us (first-party cookies) or from third-party companies (so-called third-party cookies). Third-party cookies enable the integration of certain services from third-party companies within websites (e.g., cookies for processing payment services).", de: "Unsere Internetseiten verwenden so genannte „Cookies“. Cookies sind kleine Datenpakete und richten auf Ihrem Endgerät keinen Schaden an. Sie werden entweder vorübergehend für die Dauer einer Sitzung (Session-Cookies) oder dauerhaft (permanente Cookies) auf Ihrem Endgerät gespeichert. Session-Cookies werden nach Ende Ihres Besuchs automatisch gelöscht. Permanente Cookies bleiben auf Ihrem Endgerät gespeichert, bis Sie diese selbst löschen oder eine automatische Löschung durch Ihren Webbrowser erfolgt. Cookies können von uns (First-Party-Cookies) oder von Drittunternehmen stammen (sog. Third-Party-Cookies). Third-Party-Cookies ermöglichen die Einbindung bestimmter Dienstleistungen von Drittunternehmen innerhalb von Webseiten (z.B. Cookies zur Abwicklung von Zahlungsdienstleistungen)." },
   privacyCookiesPurposeText: { en: "Cookies have various functions. Numerous cookies are technically necessary, as certain website functions would not work without them (e.g., the shopping cart function or the display of videos). Other cookies are used to evaluate user behavior or display advertising. Cookies that are necessary to carry out the electronic communication process, to provide certain functions you desire (e.g., for the shopping cart function) or to optimize the website (e.g., cookies for measuring the web audience) (necessary cookies) are stored on the basis of Art. 6 Para. 1 lit. f GDPR, unless another legal basis is specified. The website operator has a legitimate interest in storing necessary cookies for the technically error-free and optimized provision of their services. If consent to the storage of cookies and comparable recognition technologies has been requested, processing is carried out exclusively on the basis of this consent (Art. 6 Para. 1 lit. a GDPR and § 25 Para. 1 TTDSG); consent can be revoked at any time.", de: "Cookies haben verschiedene Funktionen. Zahlreiche Cookies sind technisch notwendig, da bestimmte Webseitenfunktionen ohne diese nicht funktionieren würden (z.B. die Warenkorbfunktion oder die Anzeige von Videos). Andere Cookies dienen dazu, das Nutzerverhalten auszuwerten oder Werbung anzuzeigen. Cookies, die zur Durchführung des elektronischen Kommunikationsvorgangs, zur Bereitstellung bestimmter, von Ihnen erwünschter Funktionen (z. B. für die Warenkorbfunktion) oder zur Optimierung der Website (z.B. Cookies zur Messung des Webpublikums) erforderlich sind (notwendige Cookies), werden auf Grundlage von Art. 6 Abs. 1 lit. f DSGVO gespeichert, sofern keine andere Rechtsgrundlage angegeben wird. Der Websitebetreiber hat ein berechtigtes Interesse an der Speicherung von notwendigen Cookies zur technisch fehlerfreien und optimierten Bereitstellung seiner Dienste. Sofern eine Einwilligung zur Speicherung von Cookies und vergleichbaren Wiedererkennungstechnologien abgefragt wurde, erfolgt die Verarbeitung ausschließlich auf Grundlage dieser Einwilligung (Art. 6 Abs. 1 lit. a DSGVO und § 25 Abs. 1 TTDSG); die Einwilligung ist jederzeit widerrufbar." },
   privacyCookiesBrowserSettingsText: { en: "You can set your browser so that you are informed about the setting of cookies and only allow cookies in individual cases, exclude the acceptance of cookies for certain cases or generally, and activate the automatic deletion of cookies when closing the browser. If cookies are deactivated, the functionality of this website may be limited.", de: "Sie können Ihren Browser so einstellen, dass Sie über das Setzen von Cookies informiert werden und Cookies nur im Einzelfall erlauben, die Annahme von Cookies für bestimmte Fälle oder generell ausschließen sowie das automatische Löschen der Cookies beim Schließen des Browsers aktivieren. Bei der Deaktivierung von Cookies kann die Funktionalität dieser Website eingeschränkt sein." },
   privacyCookiesWhichUsedText: { en: "Which cookies and services are used on this website can be found in this privacy policy. (Currently, no cookies are actively set by our site, except technically necessary ones by the hoster or Formspree.)", de: "Welche Cookies und Dienste auf dieser Website eingesetzt werden, können Sie dieser Datenschutzerklärung entnehmen. (Aktuell werden von unserer Seite keine Cookies aktiv gesetzt, außer technisch notwendige durch den Hoster oder Formspree.)" },
   cookieBannerText: {
       en: "This website uses technically necessary cookies. No tracking or analysis cookies are used. By using the site, you agree to this.",
       de: "Diese Website verwendet technisch notwendige Cookies. Es werden keine Tracking- oder Analyse-Cookies eingesetzt. Mit der Nutzung der Seite stimmen Sie dem zu."
   },
   cookieAcceptBtn: { en: "Understood", de: "Verstanden" },
};

// --- Helper Function to Get Dynamic Header Height ---
function getHeaderHeight() {
   const headerElement = document.querySelector('.main-header');
   return headerElement && headerElement.offsetHeight > 0 ? headerElement.offsetHeight : 70; // Provide fallback
}

// --- Global Scope Functions for Modals/Popups ---
function openModal(modalId) {
   const modal = document.getElementById(modalId);
   const modalOverlay = document.getElementById('modal-overlay');

   if (!modal || !modalOverlay) {
       console.error("Modal or modal overlay not found for ID:", modalId);
       return;
   }
   closeCookieBanner(); // Close cookie banner if open

   // Close nav if open when a modal is requested
   const mainNav = document.querySelector('.main-nav');
   if (mainNav && mainNav.classList.contains('active')) {
       const navToggle = document.getElementById('nav-toggle');
       if (navToggle) {
           toggleNav(); // Use the function to manage state correctly
       }
   }
   modal.classList.add('active');
   modalOverlay.classList.add('active'); // Activate main overlay
   modalOverlay.classList.remove('nav-open'); // Ensure overlay is clickable for modal
   modal.scrollTop = 0;
   updateBodyScrollLock();
}

function closeModal() {
   const modalOverlay = document.getElementById('modal-overlay');
   const modals = document.querySelectorAll('.modal');

   modals.forEach(modal => modal.classList.remove('active'));
   // Deactivate main overlay ONLY if nav is also closed
   if (!isNavOpen()) {
        if (modalOverlay && modalOverlay.classList.contains('active')) {
            modalOverlay.classList.remove('active');
            modalOverlay.classList.remove('nav-open'); // Clean up class
        }
   }
   updateBodyScrollLock();
}

function closeCookieBanner() {
   const banner = document.getElementById('cookie-banner');
   const overlay = document.getElementById('cookie-overlay');

   if (banner && banner.classList.contains('active')) {
       banner.classList.remove('active');
       if (overlay) overlay.classList.remove('active');
       updateBodyScrollLock();
   }
}

// --- Helper Functions to Check State ---
const isModalOpen = () => document.querySelectorAll('.modal.active').length > 0;
const isNavOpen = () => document.querySelector('.main-nav')?.classList.contains('active');
const isCookiePopupOpen = () => document.getElementById('cookie-banner')?.classList.contains('active');

// --- Central Function to Manage Body Scroll Lock ---
function updateBodyScrollLock() {
   const body = document.body;
   const modalOverlay = document.getElementById('modal-overlay');

   const shouldLockScroll = isModalOpen() || isNavOpen() || isCookiePopupOpen();

   if (shouldLockScroll) {
       if (!body.classList.contains('modal-open')) {
           body.classList.add('modal-open');
       }
       // Ensure main overlay is active if modal or nav requires it
       if ((isModalOpen() || isNavOpen()) && modalOverlay && !modalOverlay.classList.contains('active')) {
           modalOverlay.classList.add('active');
       }
   } else {
        if (body.classList.contains('modal-open')) {
            body.classList.remove('modal-open');
        }
        // Deactivate main overlay if it's active and nothing needs it anymore
        if (modalOverlay && modalOverlay.classList.contains('active') && !isModalOpen() && !isNavOpen()) {
             modalOverlay.classList.remove('active');
             modalOverlay.classList.remove('nav-open'); // Clean up class on final close
        }
   }
}


// --- Smooth Scrolling ---
function smoothScrollToTarget(targetId) {
   if (!targetId || targetId === '#') return;
   const targetElement = document.getElementById(targetId.substring(1));

   if (targetElement) {
       const headerHeight = getHeaderHeight();
       const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
       const offsetPosition = elementPosition - headerHeight;

       window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
       });
   } else {
       console.warn(`Smooth scroll target not found: ${targetId}`);
   }
}

// --- Global variable for nav toggle function ---
// Defined globally so it can be referenced by other functions like openModal
let toggleNav;

// --- Initialize Everything on DOMContentLoaded ---
document.addEventListener('DOMContentLoaded', function() {

   try {
       // --- 1. Apply Translations ---
       const userLang = navigator.language || navigator.userLanguage;
       const lang = userLang.startsWith('de') ? 'de' : 'en';
       document.documentElement.lang = lang;

       const keysWithHTML = ['aboutTitle', 'privacyTitle', 'heroHeadline', 'service1Title', 'service2Title', 'whyUsTitle', 'contactTitle']; // Keys needing innerHTML

       Object.keys(i18nStrings).forEach(key => {
           const elements = document.querySelectorAll(`[data-i18n-key="${key}"]`);
           if (!elements || elements.length === 0) return;

           const translation = i18nStrings[key]?.[lang] ?? i18nStrings[key]?.['en'];
           const fallback = i18nStrings[key]?.['en'];

           elements.forEach(element => {
               const finalTranslation = translation ?? fallback;
               if (finalTranslation !== undefined) {
                    if (key === 'pageTitle') {
                       document.title = finalTranslation;
                    } else if (keysWithHTML.includes(key)) {
                       element.innerHTML = finalTranslation; // Use innerHTML for specific keys
                    } else {
                       element.textContent = finalTranslation;
                   }
               }
           });
       });

       // --- 2. Initialize Core Page Functionality ---
       initializePage();

       // --- 3. Initialize Cookie Banner ---
       initializeCookieBanner();

   } catch (error) {
       console.error("Error during DOMContentLoaded initialization:", error);
   }
});


// --- Function to contain Core Page Initializations (called AFTER DOMContentLoaded) ---
function initializePage() {
   const body = document.body;
   const modalOverlay = document.getElementById('modal-overlay');
   const navToggle = document.getElementById('nav-toggle');
   const mainNav = document.querySelector('.main-nav');
   const progressBar = document.getElementById('scroll-progress-bar');
   const aboutImage = document.getElementById('about-img');
   const whyUsImage = document.getElementById('why-us-img');
   const closeButtons = document.querySelectorAll('.modal-close');
   const contactForm = document.getElementById('contact-form');
   const emailInput = document.getElementById('email');
   const emailHiddenInput = document.getElementById('email-hidden');
   const counters = document.querySelectorAll('.counter-value[data-target]');
   const experienceSection = document.getElementById('experience');

   // Initialize Libraries
   if (typeof feather !== 'undefined') feather.replace(); else console.warn("Feather Icons not loaded");
   if (typeof AOS !== 'undefined') AOS.init({ duration: 800, easing: 'ease-in-out-quad', once: true, offset: 50 }); else console.warn("AOS not loaded");

   // Dynamic Year
   const currentYearElement = document.getElementById('current-year');
   if (currentYearElement) { currentYearElement.textContent = new Date().getFullYear(); }

   // --- Mobile Navigation Toggle ---
    // Assign the function to the globally scoped variable
   toggleNav = () => {
        if (!mainNav || !navToggle || !modalOverlay) return;

        const isOpening = !mainNav.classList.contains('active');
        navToggle.classList.toggle('active');
        mainNav.classList.toggle('active');

        if (isOpening) {
            modalOverlay.classList.add('active');
            modalOverlay.classList.add('nav-open'); // Disable pointer events via CSS
            updateNavToggleIconColor(true);
        } else {
            modalOverlay.classList.remove('nav-open'); // Re-enable pointer events
            if (!isModalOpen()) { // Hide overlay only if no modal is open
                 if (modalOverlay) modalOverlay.classList.remove('active');
            }
            updateNavToggleIconColor(false);
        }
        updateBodyScrollLock();
   };

   const updateNavToggleIconColor = (isOpen) => {
        const styleId = 'nav-toggle-active-style';
        let styleElement = document.getElementById(styleId);
        if (isOpen) {
            if (!styleElement) { styleElement = document.createElement('style'); styleElement.id = styleId; document.head.appendChild(styleElement); }
            // CSS to make the 'X' white on dark background
            styleElement.innerHTML = `
               .nav-toggle.active span { background-color: transparent !important; }
               .nav-toggle.active span::before,
               .nav-toggle.active span::after { background-color: var(--secondary-color) !important; }
            `;
        } else {
            if (styleElement) styleElement.remove(); // Clean up injected style
        }
    }

   if (navToggle) {
        navToggle.addEventListener('click', toggleNav);
   } else { console.warn("Nav toggle button (#nav-toggle) not found."); }

   // --- Mobile Navigation Link Handling (Event Delegation) ---
   if (mainNav) {
        mainNav.addEventListener('click', (e) => {
            // Stop propagation upwards from nav container
            e.stopPropagation();

            const link = e.target.closest('a[href^="#"]');
            if (link) {
                const targetId = link.hash;
                const targetElement = targetId && targetId !== '#' ? document.getElementById(targetId.substring(1)) : null;

                if (targetElement) {
                    e.preventDefault(); // Prevent default jump
                    if (isNavOpen()) {
                        toggleNav(); // Close nav (removes .nav-open from overlay)
                    }
                    // Scroll after a delay
                    setTimeout(() => {
                        smoothScrollToTarget(targetId);
                    }, 250); // Delay allows nav closing animation & style changes
                } else {
                    // If link is invalid, just close nav
                    if (isNavOpen()) {
                        toggleNav();
                    }
                }
            }
        });
    } else { console.warn("Mobile navigation container (.main-nav) not found."); }


   // --- Smooth Scrolling & URL Hash Handling (for non-nav links) ---
   document.addEventListener('click', function(e) {
       const link = e.target.closest('a');
       if (link && link.hash && link.hash !== '#' && link.pathname === window.location.pathname && !link.closest('.main-nav')) {
           const targetElement = document.getElementById(link.hash.substring(1));
           if (targetElement) {
                e.preventDefault();
                smoothScrollToTarget(link.hash);
           }
       }
   });

   // --- Handle hash scrolling on initial page load ---
   window.addEventListener('load', () => {
       if (window.location.hash) {
           const hash = window.location.hash;
           const targetElement = document.getElementById(hash.substring(1));
           if (targetElement) {
               history.replaceState(null, '', window.location.pathname + window.location.search); // Clean URL
               // Use rAF for potentially better timing after load
               requestAnimationFrame(() => {
                   requestAnimationFrame(() => {
                       smoothScrollToTarget(hash);
                   });
               });
           }
       }
   });

   // --- Update scroll padding on resize ---
   let resizeTimer;
   window.addEventListener('resize', () => {
       clearTimeout(resizeTimer);
       resizeTimer = setTimeout(() => {
            document.documentElement.style.scrollPaddingTop = getHeaderHeight() + 'px';
       }, 100); // Debounce
   });
   // Set initial padding
   document.documentElement.style.scrollPaddingTop = getHeaderHeight() + 'px';

   // --- Scroll Progress & Effects ---
   function handleScroll() {
       const scrollTop = window.scrollY;
       const docHeight = document.documentElement.scrollHeight - window.innerHeight;
       const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
       if (progressBar) progressBar.style.width = scrollPercent + '%';

       // Parallax - apply only if images exist
       const scrollFactor = 0.08;
       if (aboutImage) applyScrollTransform(aboutImage, scrollFactor);
       if (whyUsImage) applyScrollTransform(whyUsImage, scrollFactor);
    }
   function applyScrollTransform(element, factor) {
      // Check if element is in viewport before calculating/applying transform
      if (isElementInViewport(element)) {
         const elementRect = element.getBoundingClientRect();
         const viewportHeight = window.innerHeight;
         const centerOffset = (elementRect.top + elementRect.height / 2) - viewportHeight / 2;
         const translateY = -centerOffset * factor;
         element.style.transform = `translateY(${translateY}px)`;
      }
   }
   function isElementInViewport(el) {
      if (!el) return false;
      const rect = el.getBoundingClientRect();
      return (rect.top < window.innerHeight && rect.bottom > 0);
   }
   // Optimize scroll listener
   let ticking = false;
   window.addEventListener('scroll', () => {
       if (!ticking) {
           window.requestAnimationFrame(() => {
               handleScroll();
               ticking = false;
            });
            ticking = true;
        }
   });

   // --- Animated Counter ---
   let countersAnimated = false;
   const animateCountersObserver = new IntersectionObserver((entries) => {
       entries.forEach(entry => {
           if (entry.isIntersecting && !countersAnimated && entry.target.id === 'experience') {
               counters.forEach(counter => {
                   const target = +counter.getAttribute('data-target');
                   if (!isNaN(target)) { const duration = 1500; animateCounter(counter, target, duration); }
                   else { // Handle text counters (like "8-Figure")
                        const textTargetKey = counter.getAttribute('data-i18n-key');
                        if(textTargetKey && i18nStrings[textTargetKey]){
                           const lang = document.documentElement.lang || 'en';
                           counter.textContent = i18nStrings[textTargetKey][lang] || i18nStrings[textTargetKey]['en'];
                        }
                   }
               });
               countersAnimated = true; // Animate only once
               if (experienceSection) animateCountersObserver.unobserve(experienceSection); // Stop observing
           }
       });
   }, { threshold: 0.3 }); // Trigger when 30% visible

   if (experienceSection && counters.length > 0) {
       animateCountersObserver.observe(experienceSection);
   } else if (!experienceSection) {
       console.warn("Experience section (#experience) not found for counter observer.");
   }

   function animateCounter(element, target, duration) {
      let start = 0;
      const stepTime = Math.max(16, Math.abs(Math.floor(duration / target))); // Ensure stepTime > 0
      const incrementBase = target / (duration / stepTime);
      const timer = setInterval(() => {
          start += incrementBase;
          const currentVal = Math.ceil(start);

          if ((incrementBase > 0 && currentVal >= target) || (incrementBase < 0 && currentVal <= target)) {
              element.textContent = target.toLocaleString();
              if(element.getAttribute('data-target') === '30') element.textContent += "+"; // Add + for specific counter
              clearInterval(timer);
          } else {
              element.textContent = currentVal.toLocaleString();
              if(element.getAttribute('data-target') === '30') element.textContent += "+";
          }
      }, stepTime);
   }

   // --- Contact Form ---
   if (contactForm && emailInput && emailHiddenInput) {
      contactForm.addEventListener('submit', function(e) {
          emailHiddenInput.value = emailInput.value; // Copy for _replyto
          const submitBtn = contactForm.querySelector('button[type="submit"]');
          if (submitBtn) {
                submitBtn.disabled = true;
                const sendingText = i18nStrings.formButtonSending?.[document.documentElement.lang || 'en'] || 'Sending...';
                submitBtn.textContent = sendingText;
          }
      });
   } else {
        // Only warn if the form itself is missing, not just inputs
        if (!contactForm) console.warn("Contact form (#contact-form) not found.");
   }

   // --- Modal Event Listeners ---
   const openImprintLink = document.getElementById('open-imprint');
   const openPrivacyLink = document.getElementById('open-privacy');
   if (openImprintLink) {
       openImprintLink.addEventListener('click', (e) => { e.preventDefault(); openModal('imprint-modal'); });
   } else { console.warn("Imprint link (#open-imprint) not found"); }
   if (openPrivacyLink) {
       openPrivacyLink.addEventListener('click', (e) => { e.preventDefault(); openModal('privacy-modal'); });
   } else { console.warn("Privacy link (#open-privacy) not found"); }
   // Attach listener to all close buttons
   closeButtons.forEach(button => { button.addEventListener('click', closeModal); });

   // --- Listener for the MAIN OVERLAY (#modal-overlay) ---
   if (modalOverlay) {
        modalOverlay.addEventListener('click', (e) => {
           // Ignore click if overlay is non-interactive (nav is open)
           if (modalOverlay.classList.contains('nav-open')) {
               return;
           }
           // Otherwise, handle modal closing
           if (isModalOpen()) {
               closeModal();
           }
       });
   } else { console.warn("Modal overlay (#modal-overlay) not found"); }


   // --- Global Escape Key Handler ---
   document.addEventListener('keydown', (event) => {
       if (event.key === "Escape") {
           if (isModalOpen()) { closeModal(); }
           else if (isNavOpen()) { toggleNav(); } // Use toggle function
           else if (isCookiePopupOpen()) { closeCookieBanner(); } // Just close, don't accept
       }
   });

} // End of initializePage

// --- Function to Initialize and Manage Cookie Banner Popup ---
function initializeCookieBanner() {
    const banner = document.getElementById('cookie-banner');
    const overlay = document.getElementById('cookie-overlay');
    const acceptButton = document.getElementById('cookie-accept');

    if (!banner || !overlay || !acceptButton) {
        console.warn("One or more cookie banner elements not found. Skipping banner initialization.");
        return;
    }

    const CONSENT_KEY = 'elev8_cookie_consent';
    const CONSENT_VALUE = 'accepted';

    const handleConsent = () => {
        try {
            localStorage.setItem(CONSENT_KEY, CONSENT_VALUE);
        } catch (e) {
            console.error("Could not set cookie consent in localStorage:", e);
        }
        closeCookieBanner(); // Close UI regardless of storage success
    }

    let currentConsent = null;
    try {
        currentConsent = localStorage.getItem(CONSENT_KEY);
    } catch (e) {
        console.error("Could not read cookie consent from localStorage:", e);
    }

    if (currentConsent !== CONSENT_VALUE) {
        banner.classList.add('active');
        overlay.classList.add('active');
        updateBodyScrollLock();

        acceptButton.addEventListener('click', handleConsent);
        overlay.addEventListener('click', handleConsent); // Overlay click also accepts

        // Attach listener for privacy link within the banner
        const privacyLinkInBanner = document.getElementById('cookie-banner-privacy-link');
        if (privacyLinkInBanner) {
            privacyLinkInBanner.addEventListener('click', (e) => {
                e.preventDefault();
                closeCookieBanner();
                setTimeout(() => { openModal('privacy-modal'); }, 350); // Open after delay
            });
        } else { console.warn("Cookie banner privacy link not found."); }

    } else {
         // Ensure banner is hidden if consent already exists
        if(banner.classList.contains('active')) banner.classList.remove('active');
        if(overlay.classList.contains('active')) overlay.classList.remove('active');
    }
} // End of initializeCookieBanner